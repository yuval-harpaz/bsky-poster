{"version":3,"file":"lex-error.js","sourceRoot":"","sources":["../src/lex-error.ts"],"names":[],"mappings":";;;AAOA,MAAa,QAAgD,SAAQ,KAAK;IAI7D;IAHX,IAAI,GAAG,UAAU,CAAA;IAEjB,YACW,KAAQ,EACjB,OAAgB,EAChB,OAAsB;QAEtB,KAAK,CAAC,OAAO,EAAE,OAAO,CAAC,CAAA;QAJd,UAAK,GAAL,KAAK,CAAG;IAKnB,CAAC;IAED,QAAQ;QACN,OAAO,GAAG,IAAI,CAAC,IAAI,MAAM,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,OAAO,EAAE,CAAA;IACxD,CAAC;IAED,MAAM;QACJ,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,IAAI,CAAA;QAC/B,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,IAAI,SAAS,EAAE,CAAA;IACjD,CAAC;IAED;;OAEG;IACH,UAAU;QACR,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAA;IACtD,CAAC;CACF;AA1BD,4BA0BC","sourcesContent":["export type LexErrorCode = string\n\nexport type LexErrorData<N extends LexErrorCode = LexErrorCode> = {\n  error: N\n  message?: string\n}\n\nexport class LexError<N extends LexErrorCode = LexErrorCode> extends Error {\n  name = 'LexError'\n\n  constructor(\n    readonly error: N,\n    message?: string,\n    options?: ErrorOptions,\n  ) {\n    super(message, options)\n  }\n\n  toString(): string {\n    return `${this.name}: [${this.error}] ${this.message}`\n  }\n\n  toJSON(): LexErrorData<N> {\n    const { error, message } = this\n    return { error, message: message ?? undefined }\n  }\n\n  /**\n   * Translate into an HTTP response for downstream clients.\n   */\n  toResponse(): Response {\n    return Response.json(this.toJSON(), { status: 400 })\n  }\n}\n"]}